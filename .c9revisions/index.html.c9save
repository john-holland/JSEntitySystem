{"ts":1344136218867,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1344136256518,"patch":[[{"diffs":[[1,"<script>\r\n\r\nvar NextFreeId = 0;\r\n\r\n/*\r\nThe component metadata collection.\r\nkeyed on the componentName, toLower when I can be sure what that function is called.\r\nComponent[\"name\"] =    {\r\n\tComponentName : \"name\",\r\n\tMethods : {\r\n\t\tAssigned : method,\r\n\t\tRemoved : method,\r\n\t\tUpdate : method,\r\n\t\tRender : method\r\n\t},\r\n\tRequiredComponents : array of strings,\r\n\tRequiredData : array of data names\r\n}\r\n*/\r\nvar Components = {\r\n};\r\n\r\nvar Datas = {\r\n};\r\n\r\nvar Entities = {\r\n};\r\n\r\nfunction Component(assigned, removed, update, render) {\r\n\tthis.Assigned = assigned;\r\n\tthis.Removed = removed;\r\n\tthis.Update = update;\r\n\tthis.Render = render;\r\n}\r\n\r\nfunction RegisterComponent(componentName, component, requiredComponents, requiredData) {\r\n\tComponents[componentName] = {\r\n\t\tComponentName : componentName,\r\n\t\tMethods : component,\r\n\t\tRequiredComponents : requiredComponents,\r\n\t\tRequiredData : requiredData\r\n\t};\r\n}\r\n\r\nfunction AddComponent(entity, componentName) {\r\n\tvar component = Components[componentName];\r\n\tvar requiredData = component.RequiredData;\r\n\tvar requiredComponents = component.RequiredComponent;\r\n\t\r\n\tif (!(componentName in entity.Components)) {\r\n\t\tentity.Components[componentName] = Components[componentName];\r\n\t\tentity.UpdateComponents.push(Components[componentName]);\r\n\t}\r\n\t\r\n\tfor (var key in component.RequiredComponents) {\r\n\t\tif (!(key in entity.Components)) {\r\n\t\t\tAddComponent(entity, key);\r\n\t\t}\r\n\t}\r\n\t\r\n\tfor (var key in component.RequiredData) {\r\n\t\tif (!(key in entity.Datas)) {\r\n\t\t\tentity.Datas[key] = component.RequiredData[key];\r\n\t\t}\r\n\t}\r\n}\r\n\r\nRegisterComponent('TestComponent',\r\n\tComponent(function(entity, gameTime) {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\tfunction(entity, gameTime) {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\tfunction(entity) {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\tfunction(entity) {\r\n\t\t\t\t\t}),\r\n\t\t\t\t\t\r\n\r\nfunction Entity() {\r\n\tvar self = this;\r\n\tNextFreeId = NextFreeId + 1;\r\n\tthis.Id = NextFreeId;\r\n\tthis.Datas = {\r\n\t};\r\n\tthis.Components = {\r\n\t};\r\n\tthis.UpdateComponents = new Array();\r\n\tthis.AddComponent = function(componentName) {\r\n\t\tif (!(componentName in this.components)) {\r\n\t\t\t//recursively add components here.\r\n\t\t\t//make sure to add each components required data here as well.\r\n\t\t\tAddComponent(componentName);\r\n\t\t}\r\n\t};\r\n\t\r\n\tthis.Update = function(gameTime) {\r\n\t\tvar i = 0;\r\n\t\tfor (i = 0; i < this.UpdateComponents.length; i++) {\r\n\t\t\tthis.UpdateComponents[i].Update(gameTime, self);\r\n\t\t}\r\n\t};\r\n\t\r\n\tEntities[this.Id] = this;\r\n}\r\n\r\nvar ent = new Entity();\r\nalert(ent.test);\r\nalert(Entities[ent.Id].test);\r\n\r\n</script>\r\n<body>\r\n</body>"]],"start1":0,"start2":0,"length1":0,"length2":2498}]],"length":2498,"saved":false}
{"contributors":[],"silentsave":true,"ts":1345515245955,"patch":[[{"diffs":[[0,"<"],[-1,"script>\r\n\r\nvar NextFreeId = 0;\r\n\r\n/*\r\nThe component metadata collection.\r\nkeyed on the componentName, toLower when I can be sure what that function is called.\r\nComponent[\"name\"] =    {\r\n\tComponentName : \"name\",\r\n\tMethods : {\r\n\t\tAssigned : method,\r\n\t\tRemoved : method,\r\n\t\tUpdate : method,\r\n\t\tRender : method\r\n\t},\r\n\tRequiredComponents : array of strings,\r\n\tRequiredData : array of data names\r\n}\r\n*/\r\nvar Components = {\r\n};\r\n\r\nvar Datas = {\r\n};\r\n\r\nvar Entities = {\r\n};\r\n\r\nfunction Component(assigned, removed, update, render) {\r\n\tthis.Assigned = assigned;\r\n\tthis.Removed = removed;\r\n\tthis.Update = update;\r\n\tthis.Render = render;\r\n}\r\n\r\nfunction RegisterComponent(componentName, component, requiredComponents, requiredData) {\r\n\tComponents[componentName] = {\r\n\t\tComponentName : componentName,\r\n\t\tMethods : component,\r\n\t\tRequiredComponents : requiredComponents,\r\n\t\tRequiredData : requiredData\r\n\t};\r\n}\r\n\r\nfunction AddComponent(entity, componentName) {\r\n\tvar component = Components[componentName];\r\n\tvar requiredData = component.RequiredData;\r\n\tvar requiredComponents = component.RequiredComponent;\r\n\t\r\n\tif (!(componentName in entity.Components)) {\r\n\t\tentity.Components[componentName] = Components[componentName];\r\n\t\tentity.UpdateComponents.push(Components[componentName]);\r\n\t}\r\n\t\r\n\tfor (var key in component.RequiredComponents) {\r\n\t\tif (!(key in entity.Components)) {\r\n\t\t\tAddComponent(entity, key);\r\n\t\t}\r\n\t}\r\n\t\r\n\tfor (var key in component.RequiredData) {\r\n\t\tif (!(key in entity.Datas)) {\r\n\t\t\tentity.Datas[key] = component.RequiredData[key];\r\n\t\t}\r\n\t}\r\n}\r\n\r\nRegisterComponent('TestComponent',\r\n\tComponent(function(entity, gameTime) {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\tfunction(entity, gameTime) {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\tfunction(entity) {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\tfunction(entity) {\r\n\t\t\t\t\t}),\r\n\t\t\t\t\t\r\n\r\nfunction Entity() {\r\n\tvar self = this;\r\n\tNextFreeId = NextFreeId + 1;\r\n\tthis.Id = NextFreeId;\r\n\tthis.Datas = {\r\n\t};\r\n\tthis.Components = {\r\n\t};\r\n\tthis.UpdateComponents = new Array();\r\n\tthis.AddComponent = function(componentName) {\r\n\t\tif (!(componentName in this.components)) {\r\n\t\t\t//recursively add components here.\r\n\t\t\t//make sure to add each components required data here as well.\r\n\t\t\tAddComponent(componentName);\r\n\t\t}\r\n\t};"],[1,"!DOCTYPE html>\r\n<html>\r\n<style type=\"text/css\">\r\n    div#getsMoved {color:white}\r\n    div#diagDiv {color:white}\r\n</style>\r\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js\"></script>\r\n<!-- A sweet jQuery addon for rotating an element! -->\r\n<script src=\"jQueryRotate.js\"></script>\r\n<script src=\"functional_javascript.js\"></script>\r\n<script src=\"V2.js\"></script>\r\n<script src=\"utility.js\"></script>\r\n<script src=\"entity_system.js\"></script>\r\n    <head>\r\n        <title>JavaScript Entity System Test!</title>\r\n    </head>\r\n    <body bgcolor=\"black\">\r\n        <div id=\"diagDiv\" color=\"#FFFFFF\">test</div>\r\n        \r\n        <canvas id=\"myCanvas\" width=\"200\" height=\"100\" style=\"border:1px solid #c3c3c3;\">\r\nYour browser does not support the HTML5 canvas tag.\r\n</canvas>"],[0,"\r\n"],[-1,"\t"],[0,"\r\n"],[-1,"\tthis.Update = function(gameTime) {\r\n\t\tvar i = 0;\r\n\t\tfor (i = 0; i < this.UpdateComponents.length; i++) {\r\n\t\t\tthis.UpdateComponents[i].Update(gameTime, self);\r\n\t\t}\r\n\t};\r\n\t\r\n\tEntities[this.Id] = this;\r\n}\r\n\r\nvar ent = new Entity();\r\nalert(ent.test);\r\nalert(Entities[ent.Id].test);\r\n\r\n</script>\r\n<"],[1,"<script type=\"text/javascript\">\r\n\r\nvar c=document.getElementById(\"myCanvas\");\r\nvar ctx=c.getContext(\"2d\");\r\nctx.fillStyle=\"#FF0000\";\r\nctx.fillRect(0,0,150,75);\r\n    </"],[0,"body"]],"start1":0,"start2":0,"length1":2488,"length2":970},{"diffs":[[0,"ody>\r\n</"],[-1,"body"],[1,"html"],[0,">"]],"start1":967,"start2":967,"length1":13,"length2":13}]],"length":980,"saved":false}
{"ts":1345515248084,"patch":[[{"diffs":[[0,"    "],[-1,"<canvas id=\"myCanvas\" width=\"200\" height=\"100\" style=\"border:1px solid #c3c3c3;\">\r\nYour browser does not support the HTML5 canvas tag.\r\n</canvas>\r\n\r\n<script type=\"text/javascript\">\r\n\r\nvar c=document.getElementById(\"myCanvas\");\r\nvar ctx=c.getContext(\"2d\");\r\nctx.fillStyle=\"#FF0000\";\r\nctx.fillRect(0,0,150,75);"],[0,"\r\n  "]],"start1":646,"start2":646,"length1":316,"length2":8}]],"length":672,"saved":false}
{"ts":1345515248795,"patch":[[{"diffs":[[0,"v>\r\n"],[-1,"        \r\n        \r\n"],[0,"    "]],"start1":628,"start2":628,"length1":28,"length2":8}]],"length":652,"saved":false}
